<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª | Requirements Share</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@300;400;700&family=Cairo:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* Global Styles */
        :root {
            --primary-color: #1a73e8;
            --primary-light: #e8f0fe;
            --text-primary: #202124;
            --text-secondary: #5f6368;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --border-color: #dadce0;
            --shadow: 0 1px 3px rgba(60,64,67,0.3), 0 4px 8px rgba(60,64,67,0.15);
            --shadow-light: 0 1px 2px rgba(60,64,67,0.3);
            --success-color: #34a853;
            --warning-color: #f9ab00;
            --danger-color: #ea4335;
            --info-color: #4285f4;
            --ai-color: #9b59b6;
            --radius: 12px;
            --transition: all 0.3s ease;
        }

        .dark-mode {
            --primary-color: #8ab4f8;
            --primary-light: #1e3a5f;
            --text-primary: #e8eaed;
            --text-secondary: #9aa0a6;
            --bg-color: #1a1a1a;
            --card-bg: #292a2d;
            --border-color: #3c4043;
            --shadow: 0 1px 3px rgba(0,0,0,0.5), 0 4px 8px rgba(0,0,0,0.3);
            --shadow-light: 0 1px 2px rgba(0,0,0,0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', 'Almarai', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.6;
            transition: var(--transition);
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            background: var(--card-bg);
            padding: 20px;
            margin: -20px -20px 30px -20px;
            box-shadow: var(--shadow);
            border-radius: 0 0 var(--radius) var(--radius);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1000px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo i {
            color: var(--primary-color);
            font-size: 32px;
        }

        .logo h1 {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
        }

        .theme-toggle {
            background: var(--bg-color);
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 20px;
            padding: 10px;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background-color: var(--primary-light);
            color: var(--primary-color);
            transform: scale(1.1);
        }

        /* Card Styles */
        .card {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 24px;
            transition: var(--transition);
        }

        .card-header {
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-header h2 {
            font-size: 22px;
            font-weight: 600;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 24px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 15px;
        }

        .required {
            color: var(--danger-color);
            margin-right: 4px;
        }

        input[type="text"],
        input[type="password"],
        textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            font-family: 'Cairo', sans-serif;
            font-size: 16px;
            background-color: var(--bg-color);
            color: var(--text-primary);
            transition: var(--transition);
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        textarea {
            min-height: 180px;
            resize: vertical;
        }

        /* Tags Input */
        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            background: var(--bg-color);
            min-height: 56px;
            cursor: text;
        }

        .tags-container:focus-within {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        .tag {
            background: var(--primary-color);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            animation: slideIn 0.3s;
        }

        .tag-remove {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 16px;
            line-height: 1;
            padding: 0 2px;
            opacity: 0.8;
            transition: opacity 0.2s;
        }

        .tag-remove:hover {
            opacity: 1;
        }

        .tag-input {
            border: none;
            background: transparent;
            flex: 1;
            min-width: 150px;
            padding: 6px;
            color: var(--text-primary);
            outline: none;
            font-family: 'Cairo', sans-serif;
        }

        /* Confidence Slider */
        .slider-container {
            padding: 15px 0;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: linear-gradient(to left, var(--danger-color), var(--warning-color), var(--success-color));
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            border: 3px solid var(--primary-color);
        }

        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            border: 3px solid var(--primary-color);
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        .confidence-display {
            text-align: center;
            margin-top: 12px;
            font-size: 28px;
            font-weight: 700;
            color: var(--primary-color);
        }

        /* File Upload */
        .file-upload-area {
            border: 2px dashed var(--border-color);
            border-radius: var(--radius);
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            background: var(--bg-color);
        }

        .file-upload-area:hover {
            border-color: var(--primary-color);
            background: var(--primary-light);
        }

        .file-upload-area.dragover {
            border-color: var(--primary-color);
            background: var(--primary-light);
        }

        .file-upload-icon {
            font-size: 48px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .file-list {
            margin-top: 15px;
        }

        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: var(--bg-color);
            border-radius: var(--radius);
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }

        .file-icon {
            color: var(--primary-color);
            font-size: 20px;
        }

        .file-name {
            font-weight: 500;
        }

        .file-size {
            color: var(--text-secondary);
            font-size: 13px;
            margin-right: 8px;
        }

        /* Checkbox Group */
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: var(--bg-color);
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .checkbox-group:hover {
            background: var(--primary-light);
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-group label {
            margin: 0;
            cursor: pointer;
            flex: 1;
        }

        /* Password Section */
        .password-section {
            background: var(--bg-color);
            padding: 20px;
            border-radius: var(--radius);
            border: 2px solid var(--border-color);
        }

        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }

        .badge-ai {
            background: var(--ai-color);
            color: white;
        }

        .badge-protected {
            background: var(--warning-color);
            color: #202124;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 28px;
            border-radius: var(--radius);
            font-family: 'Cairo', sans-serif;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: var(--transition);
            text-decoration: none;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #1557b0;
        }

        .btn-secondary {
            background: var(--bg-color);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--border-color);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background: #2e8e47;
        }

        .btn-warning {
            background: var(--warning-color);
            color: #202124;
        }

        .btn-warning:hover {
            background: #e09b00;
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .btn-danger:hover {
            background: #d93025;
        }

        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 20px;
        }

        /* URL Display Box */
        .url-box {
            background: var(--primary-light);
            border: 2px solid var(--primary-color);
            border-radius: var(--radius);
            padding: 20px;
            margin-top: 24px;
            animation: fadeIn 0.5s ease;
        }

        .url-text {
            word-break: break-all;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            background: var(--card-bg);
            padding: 16px;
            border-radius: var(--radius);
            margin: 15px 0;
            direction: ltr;
            text-align: left;
            color: var(--text-primary);
        }

        /* Display Styles */
        .requirement-header {
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 20px;
            margin-bottom: 24px;
        }

        .requirement-title {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .requirement-meta {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            color: var(--text-secondary);
            font-size: 15px;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .requirement-content {
            line-height: 1.9;
            font-size: 17px;
            margin: 24px 0;
            white-space: pre-wrap;
        }

        .confidence-bar {
            background: var(--bg-color);
            height: 40px;
            border-radius: 20px;
            overflow: hidden;
            margin: 20px 0;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(to left, var(--danger-color), var(--warning-color), var(--success-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 16px;
            transition: width 0.8s ease;
        }

        /* History */
        .history-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .history-item {
            padding: 20px;
            background: var(--bg-color);
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            border-right: 5px solid var(--primary-color);
        }

        .history-item:hover {
            background: var(--primary-light);
            border-color: var(--primary-color);
            transform: translateX(-5px);
        }

        .history-title {
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .history-date {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .history-preview {
            font-size: 15px;
            color: var(--text-secondary);
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-state i {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        /* Utilities */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-4 {
            margin-top: 24px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            header {
                margin: -15px -15px 20px -15px;
                padding: 15px;
            }

            .logo h1 {
                font-size: 20px;
            }

            .logo i {
                font-size: 24px;
            }

            .card {
                padding: 20px;
            }

            .btn-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .requirement-title {
                font-size: 24px;
            }

            .tag-input {
                min-width: 100px;
            }
        }

        /* Print Styles */
        @media print {
            .no-print {
                display: none !important;
            }

            body {
                background: white;
                color: black;
            }

            .card {
                box-shadow: none;
                border: 1px solid #ddd;
            }

            .requirement-content {
                font-size: 12pt;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="no-print">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-file-contract"></i>
                    <h1>Ù…Ø´Ø§Ø±ÙƒØ© Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</h1>
                </div>
                <button class="theme-toggle" id="themeToggle" aria-label="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <main>
            <!-- Input Form -->
            <div class="card fade-in" id="inputForm">
                <div class="card-header">
                    <h2><i class="fas fa-edit"></i> Ø¥Ù†Ø´Ø§Ø¡ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</h2>
                </div>

                <form id="requirementForm">
                    <div class="form-group">
                        <label for="title">
                            <span class="required">*</span>
                            Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
                        </label>
                        <input type="text" id="title" required placeholder="Ù…Ø«Ø§Ù„: ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…" dir="auto">
                    </div>

                    <div class="form-group">
                        <label for="requirements">
                            <span class="required">*</span>
                            ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
                        </label>
                        <textarea id="requirements" required placeholder="Ø§ÙƒØªØ¨ Ù…ØªØ·Ù„Ø¨Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ Ø¨Ø§Ù„ØªÙØµÙŠÙ„... ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ ğŸ˜Š" dir="auto"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Ø§Ù„ÙˆØ³ÙˆÙ… / Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</label>
                        <div class="tags-container" id="tagsContainer">
                            <input type="text" class="tag-input" id="tagInput" placeholder="Ø§ÙƒØªØ¨ ÙˆØ§Ø¶ØºØ· Enter..." dir="auto">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="confidence">
                            Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ù‚Ø©: <span id="confidenceValue">50</span>%
                        </label>
                        <div class="slider-container">
                            <input type="range" id="confidence" min="0" max="100" value="50">
                        </div>
                        <div class="confidence-display" id="confidenceDisplay">50%</div>
                    </div>

                    <div class="form-group">
                        <label>Ø¥Ø±ÙØ§Ù‚ Ù…Ù„ÙØ§Øª (Ø­ØªÙ‰ 5 Ù…Ù„ÙØ§ØªØŒ Ø­Ø¯ Ø£Ù‚ØµÙ‰ 1 Ø¬ÙŠØ¬Ø§ Ù„ÙƒÙ„ Ù…Ù„Ù)</label>
                        <div class="file-upload-area" id="fileUploadArea">
                            <div class="file-upload-icon">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <p>Ø§Ø³Ø­Ø¨ Ø§Ù„Ù…Ù„ÙØ§Øª Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±</p>
                            <input type="file" id="fileInput" multiple hidden>
                        </div>
                        <div class="file-list" id="fileList"></div>
                    </div>

                    <div class="form-group">
                        <div class="password-section">
                            <div class="checkbox-group">
                                <input type="checkbox" id="usePassword">
                                <label for="usePassword">
                                    <i class="fas fa-lock"></i>
                                    Ø­Ù…Ø§ÙŠØ© Ø¨ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ±
                                </label>
                            </div>
                            <div class="form-group hidden" id="passwordGroup" style="margin-top: 15px; margin-bottom: 0;">
                                <input type="password" id="password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                            </div>
                        </div>
                    </div>

                    <div class="checkbox-group">
                        <input type="checkbox" id="isAI">
                        <label for="isAI">
                            <i class="fas fa-robot"></i>
                            Ù…Ø­ØªÙˆÙ‰ Ù…ÙÙ†Ø´Ø£ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
                        </label>
                    </div>

                    <div class="btn-group">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-link"></i>
                            Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
                        </button>
                        <button type="button" class="btn btn-secondary" id="viewHistoryBtn">
                            <i class="fas fa-history"></i>
                            Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¬Ù„
                        </button>
                    </div>
                </form>

                <div class="url-box hidden" id="urlBox">
                    <h3 style="margin-bottom: 15px;">
                        <i class="fas fa-check-circle"></i>
                        ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ù†Ø¬Ø§Ø­!
                    </h3>
                    <div class="url-text" id="urlText"></div>
                    <div class="btn-group">
                        <button class="btn btn-success" id="copyBtn">
                            <i class="fas fa-copy"></i>
                            Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·
                        </button>
                        <button class="btn btn-success" id="whatsappBtn">
                            <i class="fab fa-whatsapp"></i>
                            ÙˆØ§ØªØ³Ø§Ø¨
                        </button>
                        <button class="btn btn-warning" id="printBtn">
                            <i class="fas fa-print"></i>
                            Ø·Ø¨Ø§Ø¹Ø© / PDF
                        </button>
                    </div>
                </div>
            </div>

            <!-- Display View -->
            <div class="card hidden" id="displayView">
                <div id="passwordCheck" class="hidden">
                    <div class="text-center" style="padding: 40px;">
                        <i class="fas fa-lock" style="font-size: 64px; color: var(--warning-color); margin-bottom: 20px;"></i>
                        <h2 style="margin-bottom: 15px;">Ù…Ø­Ù…ÙŠ Ø¨ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ±</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 25px;">Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø­Ù…ÙŠ. ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ø¹Ø±Ø¶.</p>
                        <div class="form-group" style="max-width: 400px; margin: 0 auto;">
                            <input type="password" id="viewPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                            <div id="passwordError" class="hidden" style="color: var(--danger-color); margin-top: 10px; font-size: 14px;"></div>
                        </div>
                        <button class="btn btn-primary mt-4" id="unlockBtn">
                            <i class="fas fa-unlock"></i>
                            ÙØªØ­
                        </button>
                    </div>
                </div>

                <div id="requirementDisplay" class="hidden">
                    <!-- Content will be populated by JavaScript -->
                </div>
            </div>

            <!-- History View -->
            <div class="card hidden" id="historyView">
                <div class="card-header">
                    <h2><i class="fas fa-history"></i> Ø³Ø¬Ù„ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª</h2>
                </div>
                <div class="history-list" id="historyList">
                    <div class="empty-state">
                        <i class="fas fa-folder-open"></i>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØªØ·Ù„Ø¨Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø¹Ø¯</p>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-secondary" id="backToFormBtn">
                        <i class="fas fa-arrow-right"></i>
                        Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù†Ù…ÙˆØ°Ø¬
                    </button>
                </div>
            </div>
        </main>

        <footer class="no-print" style="text-align: center; margin-top: 50px; padding-top: 30px; border-top: 1px solid var(--border-color); color: var(--text-secondary); font-size: 14px;">
            <p>Â© 2024 Ø£Ø¯Ø§Ø© Ù…Ø´Ø§Ø±ÙƒØ© Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</p>
            <p style="margin-top: 8px;">Ø£Ø¯Ø§Ø© Ø«Ø§Ø¨ØªØ© ØªØ¹Ù…Ù„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¯ÙˆÙ† Ø®Ø§Ø¯Ù… | Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ© ÙˆØ¢Ù…Ù†Ø© ğŸ”’</p>
        </footer>
    </div>

    <script>
        // State Management
        let files = [];
        let tags = [];
        let currentData = null;

        // DOM Elements
        const els = {
            inputForm: document.getElementById('inputForm'),
            displayView: document.getElementById('displayView'),
            historyView: document.getElementById('historyView'),
            requirementForm: document.getElementById('requirementForm'),
            title: document.getElementById('title'),
            requirements: document.getElementById('requirements'),
            tagInput: document.getElementById('tagInput'),
            tagsContainer: document.getElementById('tagsContainer'),
            confidence: document.getElementById('confidence'),
            confidenceValue: document.getElementById('confidenceValue'),
            confidenceDisplay: document.getElementById('confidenceDisplay'),
            fileUploadArea: document.getElementById('fileUploadArea'),
            fileInput: document.getElementById('fileInput'),
            fileList: document.getElementById('fileList'),
            usePassword: document.getElementById('usePassword'),
            passwordGroup: document.getElementById('passwordGroup'),
            password: document.getElementById('password'),
            isAI: document.getElementById('isAI'),
            urlBox: document.getElementById('urlBox'),
            urlText: document.getElementById('urlText'),
            copyBtn: document.getElementById('copyBtn'),
            whatsappBtn: document.getElementById('whatsappBtn'),
            printBtn: document.getElementById('printBtn'),
            viewHistoryBtn: document.getElementById('viewHistoryBtn'),
            backToFormBtn: document.getElementById('backToFormBtn'),
            historyList: document.getElementById('historyList'),
            passwordCheck: document.getElementById('passwordCheck'),
            requirementDisplay: document.getElementById('requirementDisplay'),
            viewPassword: document.getElementById('viewPassword'),
            unlockBtn: document.getElementById('unlockBtn'),
            passwordError: document.getElementById('passwordError'),
            themeToggle: document.getElementById('themeToggle')
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initTheme();
            setupEventListeners();
            loadHistory();
            checkURLHash();
        });

        // Theme Management
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                updateThemeIcon();
            }
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const theme = document.body.classList.contains('dark-mode') ? 'dark' : 'light';
            localStorage.setItem('theme', theme);
            updateThemeIcon();
        }

        function updateThemeIcon() {
            const icon = els.themeToggle.querySelector('i');
            if (document.body.classList.contains('dark-mode')) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
            }
        }

        // Event Listeners Setup
        function setupEventListeners() {
            // Theme toggle
            els.themeToggle.addEventListener('click', toggleTheme);

            // Form submission
            els.requirementForm.addEventListener('submit', handleFormSubmit);

            // Confidence slider
            els.confidence.addEventListener('input', (e) => {
                const value = e.target.value;
                els.confidenceValue.textContent = value;
                els.confidenceDisplay.textContent = value + '%';
            });

            // Tags
            els.tagInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    addTag(e.target.value.trim());
                    e.target.value = '';
                }
            });

            els.tagsContainer.addEventListener('click', () => {
                els.tagInput.focus();
            });

            // File upload
            els.fileUploadArea.addEventListener('click', () => els.fileInput.click());
            
            els.fileUploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                els.fileUploadArea.classList.add('dragover');
            });

            els.fileUploadArea.addEventListener('dragleave', () => {
                els.fileUploadArea.classList.remove('dragover');
            });

            els.fileUploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                els.fileUploadArea.classList.remove('dragover');
                handleFiles(e.dataTransfer.files);
            });

            els.fileInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
            });

            // Password checkbox
            els.usePassword.addEventListener('change', (e) => {
                els.passwordGroup.classList.toggle('hidden', !e.target.checked);
            });

            // Buttons
            els.copyBtn.addEventListener('click', copyLink);
            els.whatsappBtn.addEventListener('click', shareWhatsApp);
            els.printBtn.addEventListener('click', () => window.print());
            els.viewHistoryBtn.addEventListener('click', showHistory);
            els.backToFormBtn.addEventListener('click', showForm);
            els.unlockBtn.addEventListener('click', checkPassword);

            // Hash change
            window.addEventListener('hashchange', checkURLHash);
        }

        // Tag Management
        function addTag(tagText) {
            if (tagText && !tags.includes(tagText)) {
                tags.push(tagText);
                renderTags();
            }
        }

        function removeTag(tagText) {
            tags = tags.filter(t => t !== tagText);
            renderTags();
        }

        function renderTags() {
            const existingInput = els.tagInput;
            els.tagsContainer.innerHTML = '';
            
            tags.forEach(tag => {
                const tagEl = document.createElement('div');
                tagEl.className = 'tag';
                tagEl.innerHTML = `
                    ${tag}
                    <button type="button" class="tag-remove" onclick="removeTag('${tag.replace(/'/g, "\\'")}')">Ã—</button>
                `;
                els.tagsContainer.appendChild(tagEl);
            });
            
            els.tagsContainer.appendChild(existingInput);
        }

        // File Management
        function handleFiles(fileList) {
            if (files.length + fileList.length > 5) {
                alert('Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 5 Ù…Ù„ÙØ§Øª');
                return;
            }

            Array.from(fileList).forEach(file => {
                if (file.size > 1024 * 1024 * 1024) {
                    alert(`Ø§Ù„Ù…Ù„Ù ${file.name} ÙŠØªØ¬Ø§ÙˆØ² 1 Ø¬ÙŠØ¬Ø§`);
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    files.push({
                        name: file.name,
                        size: file.size,
                        type: file.type,
                        data: e.target.result
                    });
                    renderFiles();
                };
                reader.readAsDataURL(file);
            });
        }

        function renderFiles() {
            els.fileList.innerHTML = '';
            
            files.forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <div class="file-info">
                        <i class="fas fa-file file-icon"></i>
                        <div>
                            <div class="file-name">${file.name}</div>
                            <div class="file-size">${formatFileSize(file.size)}</div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeFile(${index})" style="padding: 8px 16px;">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                els.fileList.appendChild(fileItem);
            });
        }

        function removeFile(index) {
            files.splice(index, 1);
            renderFiles();
        }

        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' Ø¨Ø§ÙŠØª';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(2) + ' Ùƒ.Ø¨';
            return (bytes / (1024 * 1024)).toFixed(2) + ' Ù….Ø¨';
        }

        // Form Submission
        function handleFormSubmit(e) {
            e.preventDefault();
            
            const title = els.title.value.trim();
            const requirements = els.requirements.value.trim();
            
            if (!title || !requirements) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„ØªÙØ§ØµÙŠÙ„');
                return;
            }

            const usePassword = els.usePassword.checked;
            const password = els.password.value;

            if (usePassword && !password) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');
                return;
            }

            // Create data object
            const data = {
                title,
                requirements,
                tags,
                confidence: els.confidence.value,
                files,
                isAI: els.isAI.checked,
                createdAt: new Date().toISOString(),
                protected: usePassword,
                password: usePassword ? btoa(password) : null,
                id: Date.now()
            };

            // Save to history
            saveToHistory(data);

            // Generate share link
            const encoded = btoa(encodeURIComponent(JSON.stringify(data)));
            const shareURL = `${window.location.origin}${window.location.pathname}#${encoded}`;
            
            currentData = data;
            els.urlText.textContent = shareURL;
            els.urlBox.classList.remove('hidden');
            
            // Scroll to URL box
            els.urlBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Share Functions
        function copyLink() {
            const url = els.urlText.textContent;
            navigator.clipboard.writeText(url).then(() => {
                alert('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!');
            }).catch(() => {
                // Fallback for older browsers
                const textarea = document.createElement('textarea');
                textarea.value = url;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!');
            });
        }

        function shareWhatsApp() {
            const url = els.urlText.textContent;
            const text = `Ø´Ø§Ù‡Ø¯ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: ${currentData.title}`;
            window.open(`https://wa.me/?text=${encodeURIComponent(text + '\n\n' + url)}`, '_blank');
        }

        // History Management
        function saveToHistory(data) {
            let history = JSON.parse(localStorage.getItem('requirementsHistory') || '[]');
            history.unshift(data);
            if (history.length > 50) history = history.slice(0, 50);
            localStorage.setItem('requirementsHistory', JSON.stringify(history));
            loadHistory();
        }

        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('requirementsHistory') || '[]');
            
            if (history.length === 0) {
                els.historyList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-folder-open"></i>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØªØ·Ù„Ø¨Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø¹Ø¯</p>
                    </div>
                `;
                return;
            }
            
            els.historyList.innerHTML = history.map(item => `
                <div class="history-item" onclick="viewHistoryItem(${item.id})">
                    <div class="history-title">
                        ${item.title}
                        ${item.isAI ? '<span class="badge badge-ai"><i class="fas fa-robot"></i> AI</span>' : ''}
                        ${item.protected ? '<span class="badge badge-protected"><i class="fas fa-lock"></i> Ù…Ø­Ù…ÙŠ</span>' : ''}
                    </div>
                    <div class="history-date">
                        <i class="far fa-calendar"></i>
                        ${formatDate(item.createdAt)}
                    </div>
                    ${item.tags.length ? `<div style="margin: 8px 0;">${item.tags.map(tag => `<span class="badge" style="background: var(--primary-color); color: white; margin-left: 5px;">${tag}</span>`).join('')}</div>` : ''}
                    <div class="history-preview">
                        ${item.requirements.substring(0, 150)}${item.requirements.length > 150 ? '...' : ''}
                    </div>
                </div>
            `).join('');
        }

        function viewHistoryItem(id) {
            const history = JSON.parse(localStorage.getItem('requirementsHistory') || '[]');
            const item = history.find(h => h.id === id);
            if (item) {
                const encoded = btoa(encodeURIComponent(JSON.stringify(item)));
                window.location.hash = encoded;
                checkURLHash();
            }
        }

        // URL Hash Management
        function checkURLHash() {
            const hash = window.location.hash.substring(1);
            if (!hash) {
                showForm();
                return;
            }

            try {
                const decoded = JSON.parse(decodeURIComponent(atob(hash)));
                currentData = decoded;
                
                if (decoded.protected) {
                    showPasswordPrompt();
                } else {
                    displayRequirement(decoded);
                }
            } catch (e) {
                alert('Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ§Ù„Ø­ Ø£Ùˆ ØªØ§Ù„Ù');
                showForm();
            }
        }

        function showPasswordPrompt() {
            els.inputForm.classList.add('hidden');
            els.historyView.classList.add('hidden');
            els.displayView.classList.remove('hidden');
            els.passwordCheck.classList.remove('hidden');
            els.requirementDisplay.classList.add('hidden');
        }

        function checkPassword() {
            const password = els.viewPassword.value;
            if (btoa(password) === currentData.password) {
                els.passwordCheck.classList.add('hidden');
                els.requirementDisplay.classList.remove('hidden');
                displayRequirement(currentData);
            } else {
                els.passwordError.textContent = 'âŒ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©';
                els.passwordError.classList.remove('hidden');
                setTimeout(() => {
                    els.passwordError.classList.add('hidden');
                }, 3000);
            }
        }

        function displayRequirement(data) {
            els.inputForm.classList.add('hidden');
            els.historyView.classList.add('hidden');
            els.displayView.classList.remove('hidden');
            els.passwordCheck.classList.add('hidden');
            els.requirementDisplay.classList.remove('hidden');

            els.requirementDisplay.innerHTML = `
                <div class="requirement-header">
                    <div class="requirement-title">
                        ${data.title}
                        ${data.isAI ? '<span class="badge badge-ai"><i class="fas fa-robot"></i> AI</span>' : ''}
                    </div>
                    <div class="requirement-meta">
                        <span class="meta-item">
                            <i class="far fa-calendar"></i>
                            ${formatDate(data.createdAt)}
                        </span>
                        ${data.tags.length ? `
                            <span class="meta-item">
                                <i class="fas fa-tags"></i>
                                ${data.tags.join(', ')}
                            </span>
                        ` : ''}
                    </div>
                </div>

                <div class="form-group">
                    <label>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ù‚Ø©</label>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: ${data.confidence}%">${data.confidence}%</div>
                    </div>
                </div>

                <div class="requirement-content">
                    <h3 style="margin-bottom: 15px; color: var(--primary-color);">
                        <i class="fas fa-file-alt"></i>
                        ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
                    </h3>
                    ${data.requirements}
                </div>

                ${data.files && data.files.length > 0 ? `
                    <div class="form-group">
                        <h3 style="margin-bottom: 15px; color: var(--primary-color);">
                            <i class="fas fa-paperclip"></i>
                            Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª
                        </h3>
                        <div class="file-list">
                            ${data.files.map(file => `
                                <div class="file-item">
                                    <div class="file-info">
                                        <i class="fas fa-file file-icon"></i>
                                        <div>
                                            <div class="file-name">${file.name}</div>
                                            <div class="file-size">${formatFileSize(file.size)}</div>
                                        </div>
                                    </div>
                                    <a href="${file.data}" download="${file.name}" class="btn btn-secondary" style="padding: 8px 16px;">
                                        <i class="fas fa-download"></i>
                                        ØªØ­Ù…ÙŠÙ„
                                    </a>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                ` : ''}

                <div class="btn-group no-print">
                    <button class="btn btn-primary" onclick="copyCurrentLink()">
                        <i class="fas fa-copy"></i>
                        Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·
                    </button>
                    <button class="btn btn-success" onclick="shareCurrentWhatsApp()">
                        <i class="fab fa-whatsapp"></i>
                        ÙˆØ§ØªØ³Ø§Ø¨
                    </button>
                    <button class="btn btn-warning" onclick="window.print()">
                        <i class="fas fa-print"></i>
                        Ø·Ø¨Ø§Ø¹Ø© / PDF
                    </button>
                    <button class="btn btn-secondary" onclick="showForm()">
                        <i class="fas fa-plus"></i>
                        Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙŠØ¯
                    </button>
                </div>
            `;

            // Animate confidence bar
            setTimeout(() => {
                const fill = els.requirementDisplay.querySelector('.confidence-fill');
                if (fill) fill.style.width = data.confidence + '%';
            }, 100);
        }

        function copyCurrentLink() {
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                alert('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!');
            });
        }

        function shareCurrentWhatsApp() {
            const url = window.location.href;
            const text = `Ø´Ø§Ù‡Ø¯ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: ${currentData.title}`;
            window.open(`https://wa.me/?text=${encodeURIComponent(text + '\n\n' + url)}`, '_blank');
        }

        // View Management
        function showForm() {
            els.inputForm.classList.remove('hidden');
            els.displayView.classList.add('hidden');
            els.historyView.classList.add('hidden');
            window.location.hash = '';
        }

        function showHistory() {
            els.inputForm.classList.add('hidden');
            els.displayView.classList.add('hidden');
            els.historyView.classList.remove('hidden');
            loadHistory();
        }

        // Utility Functions
        function formatDate(isoString) {
            const date = new Date(isoString);
            const options = {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            return date.toLocaleDateString('ar-SA', options);
        }

        // Make functions global for onclick handlers
        window.removeTag = removeTag;
        window.removeFile = removeFile;
        window.viewHistoryItem = viewHistoryItem;
        window.copyCurrentLink = copyCurrentLink;
        window.shareCurrentWhatsApp = shareCurrentWhatsApp;
        window.showForm = showForm;
    </script>
</body>
</html>